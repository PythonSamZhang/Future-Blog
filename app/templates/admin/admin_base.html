{% extends "bootstrap/base.html" %}
{% import "bootstrap/wtf.html" as wtf %}


{% block scripts %}
{{ super() }}
{{ moment.include_moment() }}
{% endblock %}

{% block title %}Future OJ{% endblock %}

{% block head %}
{{ super() }}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">
    <link href="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.bootcss.com/font-awesome/5.11.2/css/all.css" rel="stylesheet">
    <style type="text/css">
      a{
          text-decoration:none;
          color: black;
      }
      a:hover{
          text-decoration:none;
          color: text-primary;
      }
      .feather {
        width: 16px;
        height: 16px;
        vertical-align: text-bottom;
      }
      
      /*
       * Sidebar
       */
      
      .sidebar {
        position: static;
        top: 0;
        bottom: 0;
        left: 0;
        /*z-index: 100;  Behind the navbar */
        padding: 18px 0 0; /* Height of navbar */
        box-shadow: inset -1px 0 0 rgba(0, 0, 0, .1);
      }
      
      .sidebar-sticky {
        position: relative;
        top: 0;
        height: calc(100vh - 48px);
        padding-top: 0rem;
        overflow-x: hidden;
        overflow-y: auto; /* Scrollable contents if viewport is shorter than content. */
      }
      
      @supports ((position: -webkit-sticky) or (position: sticky)) {
        .sidebar-sticky {
          position: -webkit-sticky;
          position: sticky;
        }
      }
      
      .sidebar .nav-link {
        font-weight: 500;
        color: #fff;
      }
      
      .sidebar .nav-link.active {
        color: #007bff;
      }
      
      .sidebar .nav-link:hover .feather,
      .sidebar .nav-link.active .feather {
        color: inherit;
      }
      
      .sidebar-heading {
        font-size: .75rem;
        text-transform: uppercase;
      }
      
      
      .navbar .form-control {
        padding: .75rem 1rem;
        border-width: 0;
        border-radius: 0;
      }
      
      .form-control-dark {
        color: #fff;
        background-color: rgba(255, 255, 255, .1);
        border-color: rgba(255, 255, 255, .1);
      }
      
      .form-control-dark:focus {
        border-color: transparent;
        box-shadow: 0 0 0 3px rgba(255, 255, 255, .25);
      }
      .profile-thumbnail {
        position: absolute;
    }
    
    .profile-header {
        min-height: 260px;
        margin-left: 280px;
    }
    
    div.post-tabs {
        margin-top: 16px;
    }
    
    ul.posts {
        list-style-type: none;
        padding: 0px;
        margin: 16px 0px 0px 0px;
        border-top: 1px solid #e0e0e0;
    }
    
    div.post-tabs ul.posts {
        margin: 0px;
        border-top: none;
    }
    
    ul.posts li.post {
        padding: 8px;
        border-bottom: 1px solid #e0e0e0;
    }
    
    /*ul.posts li.post:hover {
        background-color: #f0f0f0;
    }*/
    
    ul div.post-date {
        float: right;
    }
    
    div.post-author {
        font-weight: flat;
    }
    
    div.post-thumbnail {
        position: absolute;
    }
    
    div.post-content {
        margin-left: 48px;
        min-height: 48px;
    }
    
    div.post-footer {
        text-align: right;
    }
    
    ul.comments {
        list-style-type: none;
        padding: 0px;
        margin: 16px 0px 0px 0px;
    }
    
    ul.comments li.comment {
        margin-left: 32px;
        padding: 8px;
        border-bottom: 1px solid #e0e0e0;
    }
    
    ul.comments li.comment:nth-child(1) {
        border-top: 1px solid #e0e0e0;
    }
    
    ul.comments li.comment:hover {
        background-color: #f0f0f0;
    }
    
    div.comment-date {
        float: right;
    }
    
    div.comment-author {
        font-weight: flat;
    }
    
    div.comment-thumbnail {
        position: absolute;
    }
    
    div.comment-content {
        margin-left: 48px;
        min-height: 48px;
    }
    
    div.comment-form {
        margin: 16px 0px 16px 32px;
    }
    
    div.pagination {
        width: 100%;
        text-align: right;
        padding: 0px;
        margin: 0px;
    }
    
    div.flask-pagedown-preview {
        margin: 10px 0px 10px 0px;
        border: 1px solid #e0e0e0;
        padding: 4px;
    }
    

    .table.followers tr {
        border-bottom: 1px solid #e0e0e0;
    }

    .table.admin-users tr {
        border-bottom: 1px solid #e0e0e0;
        
    }

    a.link
    {
        color:#000000;
        text-decoration:underline;
    }


    ul.news {
        list-style-type: none;
        padding: 0px;
        margin: 16px 0px 0px 0px;
        border-top: 1px solid #e0e0e0;
    }
    
    div.news-tabs ul.news {
        margin: 0px;
        border-top: none;
    }
    
    ul.news li.news {
        padding: 8px;
        border-bottom: 1px solid #e0e0e0;
    }
    
    ul.news li.news:hover {
        background-color: #f0f0f0;
    }
    
    ul div.news-date {
        float: right;
    }
    div.news-thumbnail {
        position: absolute;
    }
    div.news-author {
        font-weight: flat;
    }
    div.post-content {
        margin-left: 48px;
        min-height: 48px;
    }
    
    .page-header {
        padding-bottom: 9px;
        margin: 40px 0 20px;
        border-bottom: 1px solid #eee;
      }
    
    div.comment-body h1 {
        font-size: 140%;
    }
    
    div.comment-body h2 {
        font-size: 130%;
    }
    
    div.comment-body h3 {
        font-size: 120%;
    }

    div.comment-body h4 {
        font-size: 110%;
    }

    div.comment-content h1 {
        font-size: 140%;
    }
    
    div.comment-content h2 {
        font-size: 130%;
    }
    
    div.comment-content h3 {
        font-size: 120%;
    }

    div.comment-content h4 {
        font-size: 110%;
    }
    
    .chatlist{margin-top:44px;padding:12px;}
    .chatlist p.time{margin:0;text-align: center;}
    .chatlist p.time span{padding:0 18px;display:inline-block;font-size:9pt;color: #fff;border-radius: 2px;background-color: #dcdcdc;}
    .chatlist .chatout,.chatlist .chatin{margin:10px 0;}
    .chatlist .chatout{text-align:right;}
    .chatlist .chatout img{float:right;width:40px;height:40px;border-radius:50%;margin: 0 0 0 10px;}
    .chatlist .chatout span{display: inline-block;position:relative;padding:10px;max-width: calc(100% - 90px);min-height: 40px;line-height:20px;font-size: 13px;word-break: break-all;border-radius: 4px;background-color: #0067F4;color:#fff;}
    .chatlist .chatout span:before{content: " ";position: absolute;top: 9px;left: 100%;border: 6px solid transparent;border-left-color: #0067F4;}
    .chatlist .chatin img{float:left;width:40px;height:40px;border-radius:50%;margin: 0 10px 0 0;}
    .chatlist .chatin span{display: inline-block;position:relative;padding:10px;max-width: calc(100% - 90px);min-height: 40px;line-height:20px;font-size: 13px;word-break: break-all;border-radius: 4px;text-align: left;background-color: #fafafa;}
    .chatlist .chatin span:before{content: " ";position: absolute;top: 9px;right: 100%;border: 6px solid transparent;border-right-color: #fafafa;}

  </style>
{% endblock %}

{% block navbar %}

    <!-- Collect the nav links, forms, and other content for toggling -->
    <nav class="navbar navbar-expand-lg bg-dark navbar-dark">
          <a class="navbar-brand" href="/">
            <img src="{{ url_for('static', filename='favicon.png') }}" width="30" height="30" class="d-inline-block" alt=""> &nbsp;&nbsp;&nbsp;Future Blog
          </a>

          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/blog">Blog</a>
        </li>
      </ul>
      <div class="container">
      <ul class="nav navbar-nav navbar-right justify-content-end ml-auto">
        {% if current_user.is_authenticated %}
        &nbsp;&nbsp;
            <li class="nav-item dropdown mr-lg-5">
            <a href="" class="nav-link dropdown-toggle" data-toggle="dropdown">Hello, {{ current_user.username }}</a>
              <ul class="dropdown-menu fade">
                  <a class="dropdown-item" href="{{ url_for('main.user', username=current_user.username) }}">Profile</a>
                  {% if current_user.can(Permission.MODERATE) %}
                  <a class="dropdown-item" href="{{ url_for('main.moderate') }}">Moderate Comments</a>
                  {% endif %}
                  {% if current_user.can(Permission.ADMIN) %}
                  <a class="dropdown-item" href="{{ url_for('main.admin') }}">Admininistration</a>
                  {% endif %}
                  {% if current_user.unread != 0 %}
                  <span class="dropdown-item">Notifications <span class="badge badge-primary">{{ current_user.unread }}</span></span>
                  {% endif %}
                  <a class="dropdown-item" href="{{ url_for('main.logout') }}">Log Out</a>
              </ul>
            </li>
        {% else %}
        <a class="nav-link" href="{{ url_for('main.login') }}">Log In</a>  <a class="nav-link" href="{{ url_for('main.register') }}">Register</a>
        {% endif %}
    </ul>
    </div>
  </ul>

</p>
</nav>
<div class="container-fluid">
  <div class="row">
    <nav class="col-md-2 d-none d-md-block bg-dark text-white sidebar">
      <div class="sidebar-sticky">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link" href="/admin">
              <i class="fa fa-home"></i>
              首页
            </a>
          </li>
          <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
            <span>常用设置</span>
          </h6>
          <li class="nav-item">
            <a class="nav-link" href="/admin/users">
              <i class="fa fa-users"></i>
              用户管理
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/admin/posts">
              <i class="fa fa-file-alt"></i>
              &nbsp;博客管理
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/admin/comments">
              <i class="fa fa-comments"></i>
              评论管理
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/admin/news">
              <i class="fa fa-newspaper"></i>
              新闻管理
            </a>
          </li>
        </ul>
      </div>
    </nav>
{% endblock %}

{% block content %}
<div class="col col-md-10">
  <br>
  {% for message in get_flashed_messages() %}
    <div class="alert alert-warning fade in show alert-dismissible">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        {{ message }}<br>
    </div>
    {% endfor %}
    <body class="bg-light">
      {% block admin_content %}
      {% endblock %}
    </body>
</div>
{% endblock %}